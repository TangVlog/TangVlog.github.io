<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>只是条咸鱼罢了</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-03-11T07:24:39.756Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>heytang</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>基于 Arduino 的 OLED 菜单显示</title>
    <link href="http://example.com/2025/03/11/%E5%9F%BA%E4%BA%8E-Arduino-%E7%9A%84-OLED-%E8%8F%9C%E5%8D%95%E6%98%BE%E7%A4%BA/"/>
    <id>http://example.com/2025/03/11/%E5%9F%BA%E4%BA%8E-Arduino-%E7%9A%84-OLED-%E8%8F%9C%E5%8D%95%E6%98%BE%E7%A4%BA/</id>
    <published>2025-03-11T07:23:53.000Z</published>
    <updated>2025-03-11T07:24:39.756Z</updated>
    
    <content type="html"><![CDATA[<h3 id="介绍："><a href="#介绍：" class="headerlink" title="介绍："></a>介绍：</h3><p>在 Arduino 项目中，使用 OLED 显示屏可以为用户提供直观的交互界面。本文将介绍如何使用 Arduino 和 U8g2 库创建一个简单的 OLED 菜单显示器，以便用户可以浏览和选择不同的菜单选项。</p><h3 id="准备材料："><a href="#准备材料：" class="headerlink" title="准备材料："></a>准备材料：</h3><p>Arduino 开发板<br>SSD1306 128x64 OLED 显示屏<br>两个按钮，用于向上和向下滚动菜单选项<br>代码解析：</p><p>首先，我们需要导入 U8g2 库，并设置 OLED 显示屏的引脚和类型。在这个示例中，我们使用 SSD1306 128x64 OLED 显示屏。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;U8g2lib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">U8G2_SSD1306_128X64_NONAME_F_HW_I2C <span class="title">u8g2</span><span class="params">(U8G2_R0, <span class="comment">/* reset=*/</span> U8X8_PIN_NONE)</span></span>;</span><br></pre></td></tr></table></figure><p>接下来，我们定义了一些变量，如选中的菜单选项、菜单选项的数量、菜单高度和行高等。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> selectedOption = <span class="number">0</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> numOptions = <span class="number">8</span>;  <span class="comment">// 假设有8个菜单选项</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* options[] = &#123;<span class="string">&quot;Option 1&quot;</span>, <span class="string">&quot;Option 2&quot;</span>, <span class="string">&quot;Option 3&quot;</span>, <span class="string">&quot;Option 4&quot;</span>, <span class="string">&quot;Option 5&quot;</span>, <span class="string">&quot;Option 6&quot;</span>, <span class="string">&quot;Option 7&quot;</span>, <span class="string">&quot;Option 8&quot;</span>&#125;;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> menuHeight = <span class="number">64</span>; <span class="comment">// 菜单高度（像素）</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> lineHeight = <span class="number">12</span>; <span class="comment">// 每行的高度（像素）</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> visibleOptions = menuHeight / lineHeight; <span class="comment">// 可见的菜单选项数量</span></span><br></pre></td></tr></table></figure><p>我们还定义了两个按钮的引脚，用于向上和向下滚动菜单选项，以及滚动的速度。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> scrollButtonPin = <span class="number">2</span>; <span class="comment">// 向下滚动按钮所连接的引脚</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> scrollUpButtonPin = <span class="number">3</span>; <span class="comment">// 向上滚动按钮所连接的引脚</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> scrollSpeed = <span class="number">200</span>; <span class="comment">// 滚动速度（毫秒）</span></span><br></pre></td></tr></table></figure><p>然后，我们实现了 drawMenu() 函数来绘制菜单。该函数使用 U8g2 库来绘制选项和滚动条，并根据选中的菜单选项进行高亮显示。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">drawMenu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  u8g<span class="number">2.f</span>irstPage();</span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    u8g<span class="number">2.</span><span class="built_in">setFont</span>(u8g2_font_6x10_tf);</span><br><span class="line">    <span class="type">int</span> startOption = selectedOption - (visibleOptions / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">if</span> (startOption &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      startOption = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (startOption + visibleOptions &gt; numOptions) &#123;</span><br><span class="line">      startOption = numOptions - visibleOptions;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; visibleOptions; i++) &#123;</span><br><span class="line">      <span class="type">int</span> optionIndex = startOption + i;</span><br><span class="line">      <span class="keyword">if</span> (optionIndex &gt;= <span class="number">0</span> &amp;&amp; optionIndex &lt; numOptions) &#123;</span><br><span class="line">        <span class="keyword">if</span> (optionIndex == selectedOption) &#123;</span><br><span class="line">          u8g<span class="number">2.</span><span class="built_in">drawBox</span>(<span class="number">0</span>, i * lineHeight + <span class="number">2</span>, u8g<span class="number">2.</span><span class="built_in">getDisplayWidth</span>() - <span class="number">4</span>, lineHeight);</span><br><span class="line">          u8g<span class="number">2.</span><span class="built_in">setDrawColor</span>(<span class="number">0</span>);</span><br><span class="line">          u8g<span class="number">2.</span><span class="built_in">setFontMode</span>(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          u8g<span class="number">2.</span><span class="built_in">setDrawColor</span>(<span class="number">1</span>);</span><br><span class="line">          u8g<span class="number">2.</span><span class="built_in">setFontMode</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        u8g<span class="number">2.</span><span class="built_in">setCursor</span>(<span class="number">2</span>, i * lineHeight + <span class="number">10</span>);</span><br><span class="line">        u8g<span class="number">2.</span><span class="built_in">print</span>(options[optionIndex]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 绘制滚动条</span></span><br><span class="line">    <span class="type">int</span> scrollBarHeight = menuHeight / numOptions;</span><br><span class="line">    <span class="type">int</span> scrollBarY = (menuHeight - scrollBarHeight) * selectedOption / (numOptions - <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> scrollBarWidth = <span class="number">2</span>;</span><br><span class="line">    u8g<span class="number">2.</span><span class="built_in">setDrawColor</span>(<span class="number">1</span>);</span><br><span class="line">    u8g<span class="number">2.</span><span class="built_in">drawBox</span>(u8g<span class="number">2.</span><span class="built_in">getDisplayWidth</span>() - scrollBarWidth, scrollBarY, scrollBarWidth, scrollBarHeight);</span><br><span class="line">  &#125; <span class="keyword">while</span> (u8g<span class="number">2.</span><span class="built_in">nextPage</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来，在 setup() 函数中，我们初始化 OLED 显示屏和设置按钮引脚。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  u8g<span class="number">2.</span><span class="built_in">begin</span>();</span><br><span class="line">  u8g<span class="number">2.</span><span class="built_in">enableUTF8Print</span>();</span><br><span class="line">  <span class="built_in">pinMode</span>(scrollButtonPin, INPUT_PULLUP); <span class="comment">// 设置向下滚动按钮引脚为输入，带上拉电阻</span></span><br><span class="line">  <span class="built_in">pinMode</span>(scrollUpButtonPin, INPUT_PULLUP); <span class="comment">// 设置向上滚动按钮引脚为输入，带上拉电阻</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后，在 loop() 函数中，我们使用按钮的状态来滚动菜单选项，并调用 drawMenu() 函数来更新显示。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">digitalRead</span>(scrollButtonPin) == LOW) &#123;</span><br><span class="line">    selectedOption = (selectedOption + <span class="number">1</span>) % numOptions;</span><br><span class="line">    <span class="built_in">drawMenu</span>();</span><br><span class="line">    <span class="built_in">delay</span>(scrollSpeed);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">digitalRead</span>(scrollUpButtonPin) == LOW) &#123;</span><br><span class="line">    selectedOption = (selectedOption - <span class="number">1</span> + numOptions) % numOptions;</span><br><span class="line">    <span class="built_in">drawMenu</span>();</span><br><span class="line">    <span class="built_in">delay</span>(scrollSpeed);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果<br><img src="https://i-blog.csdnimg.cn/blog_migrate/70963cccc6be037797c88e4847efffc8.png" alt="在这里插入图片描述"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;介绍：&quot;&gt;&lt;a href=&quot;#介绍：&quot; class=&quot;headerlink&quot; title=&quot;介绍：&quot;&gt;&lt;/a&gt;介绍：&lt;/h3&gt;&lt;p&gt;在 Arduino 项目中，使用 OLED 显示屏可以为用户提供直观的交互界面。本文将介绍如何使用 Arduino 和 U8g2 库</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>MySQL REPLACE 的奇妙用法</title>
    <link href="http://example.com/2025/03/07/MySQL-replace-%E7%9A%84%E5%A5%87%E5%A6%99%E7%94%A8%E6%B3%95/"/>
    <id>http://example.com/2025/03/07/MySQL-replace-%E7%9A%84%E5%A5%87%E5%A6%99%E7%94%A8%E6%B3%95/</id>
    <published>2025-03-07T14:29:00.000Z</published>
    <updated>2025-03-08T02:10:49.904Z</updated>
    
    <content type="html"><![CDATA[<p><code>REPLACE</code> 是 MySQL 中一个非常实用的命令，可以看作是 <code>INSERT</code> 的增强版。它的主要功能是：<strong>如果表中已存在相同的主键或唯一索引记录，则先删除旧记录，再插入新记录；如果不存在，则直接插入新记录</strong>。</p><span id="more"></span><h3 id="REPLACE-的基本用法"><a href="#REPLACE-的基本用法" class="headerlink" title="REPLACE 的基本用法"></a>REPLACE 的基本用法</h3><p><code>REPLACE</code> 的语法几乎与 <code>INSERT</code> 相同，唯一的区别是：<strong>插入的字段中必须包含主键或唯一索引字段</strong>。</p><h4 id="示例-1：插入单条数据"><a href="#示例-1：插入单条数据" class="headerlink" title="示例 1：插入单条数据"></a>示例 1：插入单条数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">REPLACE <span class="keyword">INTO</span> tabname(id, name, createtime) </span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;2020-08-18&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="示例-2：将查询结果作为值插入"><a href="#示例-2：将查询结果作为值插入" class="headerlink" title="示例 2：将查询结果作为值插入"></a>示例 2：将查询结果作为值插入</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REPLACE <span class="keyword">INTO</span> tabname(id, name, createtime)</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> tabname <span class="keyword">WHERE</span> createdate <span class="operator">=</span> <span class="string">&#x27;2022-02-01&#x27;</span>) <span class="keyword">AS</span> id,</span><br><span class="line">    <span class="string">&#x27;test&#x27;</span> <span class="keyword">AS</span> name,</span><br><span class="line">    <span class="string">&#x27;2022-08-18&#x27;</span> <span class="keyword">AS</span> createtime;</span><br></pre></td></tr></table></figure><h3 id="REPLACE-的工作原理"><a href="#REPLACE-的工作原理" class="headerlink" title="REPLACE 的工作原理"></a>REPLACE 的工作原理</h3><ol><li>检查冲突：<code>REPLACE</code> 会根据主键或唯一索引检查表中是否已存在相同记录。</li><li>删除旧记录：如果存在冲突，则先删除旧记录。</li><li>插入新记录：插入新记录。</li></ol><h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ul><li>性能影响：由于 <code>REPLACE</code> 可能会先删除再插入，因此在数据量较大时，可能会影响性能。</li><li>字段完整性：如果表中定义了自增主键，使用 REPLACE 会导致自增值增加。</li><li>触发器：REPLACE 会触发 DELETE 和 INSERT 触发器。</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;REPLACE&lt;/code&gt; 是 MySQL 中一个非常实用的命令，可以看作是 &lt;code&gt;INSERT&lt;/code&gt; 的增强版。它的主要功能是：&lt;strong&gt;如果表中已存在相同的主键或唯一索引记录，则先删除旧记录，再插入新记录；如果不存在，则直接插入新记录&lt;/strong&gt;。&lt;/p&gt;</summary>
    
    
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="SQL技巧" scheme="http://example.com/tags/SQL%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>Test</title>
    <link href="http://example.com/2025/03/07/Test/"/>
    <id>http://example.com/2025/03/07/Test/</id>
    <published>2025-03-07T08:16:32.000Z</published>
    <updated>2025-03-07T08:16:32.313Z</updated>
    
    
    
    
    
  </entry>
  
</feed>
